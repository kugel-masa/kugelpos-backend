{
  "openapi": "3.1.0",
  "info": {
    "title": "FastAPI",
    "version": "0.1.0"
  },
  "paths": {
    "/api/v1/accounts/token": {
      "post": {
        "summary": "Login For Access Token",
        "description": "Authenticate user and provide a JWT access token\n\nThe client_id field in the form is used as the tenant_id for multi-tenant support\n\nArgs:\n    form_data: Form containing username, password and client_id (as tenant_id)\n\nReturns:\n    LoginResponse: Object containing the access token and token type\n\nRaises:\n    HTTPException: If authentication fails",
        "operationId": "login_for_access_token_api_v1_accounts_token_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_login_for_access_token_api_v1_accounts_token_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 400,
                  "message": "Bad request",
                  "data": "400:Bad request"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 401,
                  "message": "Unauthorized",
                  "data": "401:Unauthorized"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable entity",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 422,
                  "message": "Unprocessable entity",
                  "data": "[{'type': 'missing', 'loc': ('body', 'pin'), 'msg': 'Field required', 'input': {'id': '1234', 'name': 'someone'}}]"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 500,
                  "message": "Internal server error",
                  "data": "500:Internal server error"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/accounts/register": {
      "post": {
        "summary": "Register Super User",
        "description": "Register a new superuser and create a new tenant\n\nThis endpoint is used for initial setup of a tenant and its admin user\n\nArgs:\n    user: User information (username, password, optional tenant_id)\n    tenant_id: Generated or verified tenant ID from the dependency\n\nReturns:\n    ApiResponse[UserAccountInDB]: Response with the created user information",
        "operationId": "register_super_user_api_v1_accounts_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserAccount"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_UserAccountInDB_"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 400,
                  "message": "Bad request",
                  "data": "400:Bad request"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 401,
                  "message": "Unauthorized",
                  "data": "401:Unauthorized"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable entity",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 422,
                  "message": "Unprocessable entity",
                  "data": "[{'type': 'missing', 'loc': ('body', 'pin'), 'msg': 'Field required', 'input': {'id': '1234', 'name': 'someone'}}]"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 500,
                  "message": "Internal server error",
                  "data": "500:Internal server error"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/accounts/register/user": {
      "post": {
        "summary": "Register User By Superuser",
        "description": "Register a new regular user in the tenant by a superuser\n\nThis endpoint is protected and can only be called by authenticated superusers\n\nArgs:\n    user: User information to create (username, password)\n    current_user: The authenticated superuser creating this user\n\nReturns:\n    ApiResponse[UserAccountInDB]: Response with the created user information\n\nRaises:\n    HTTPException: If the current user is not a superuser",
        "operationId": "register_user_by_superuser_api_v1_accounts_register_user_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserAccount"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_UserAccountInDB_"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 400,
                  "message": "Bad request",
                  "data": "400:Bad request"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 401,
                  "message": "Unauthorized",
                  "data": "401:Unauthorized"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable entity",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 422,
                  "message": "Unprocessable entity",
                  "data": "[{'type': 'missing', 'loc': ('body', 'pin'), 'msg': 'Field required', 'input': {'id': '1234', 'name': 'someone'}}]"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                },
                "example": {
                  "success": false,
                  "code": 500,
                  "message": "Internal server error",
                  "data": "500:Internal server error"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint that returns a welcome message.\nUseful for health checks and API verification.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint for monitoring service health.\n\nReturns:\n    HealthCheckResponse: Service health status including component checks",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthCheckResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ApiResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "code": {
            "type": "integer",
            "title": "Code",
            "default": 200
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "userError": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserError"
              },
              {
                "type": "null"
              }
            ]
          },
          "data": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Data"
          },
          "metadata": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Metadata"
              },
              {
                "type": "null"
              }
            ]
          },
          "operation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Operation"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "data"
        ],
        "title": "ApiResponse",
        "description": "Standardized API response model used by all endpoints.\n\nProvides a consistent structure for all API responses, including status information,\nerror details when applicable, and the actual response data. The model is generic\nand can accommodate any data type for the response payload.\n\nAttributes:\n    success: Boolean indicating if the operation was successful\n    code: HTTP status code for the response\n    message: System message typically used for logging or debugging\n    user_error: User-friendly error information when an error occurs\n    data: The actual response payload (generic type)\n    metadata: Additional metadata like pagination info for list responses\n    operation: Name of the operation that was performed (for tracking)"
      },
      "ApiResponse_UserAccountInDB_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "code": {
            "type": "integer",
            "title": "Code",
            "default": 200
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "userError": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserError"
              },
              {
                "type": "null"
              }
            ]
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserAccountInDB"
              },
              {
                "type": "null"
              }
            ]
          },
          "metadata": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Metadata"
              },
              {
                "type": "null"
              }
            ]
          },
          "operation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Operation"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "data"
        ],
        "title": "ApiResponse[UserAccountInDB]"
      },
      "Body_login_for_access_token_api_v1_accounts_token_post": {
        "properties": {
          "grant_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^password$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grant Type"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "format": "password",
            "title": "Password"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "default": ""
          },
          "client_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Id"
          },
          "client_secret": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "format": "password",
            "title": "Client Secret"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_login_for_access_token_api_v1_accounts_token_post"
      },
      "ComponentHealth": {
        "properties": {
          "status": {
            "$ref": "#/components/schemas/HealthStatus",
            "description": "Health status of the component"
          },
          "response_time_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Response Time Ms",
            "description": "Response time in milliseconds"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional details about the component"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if unhealthy"
          },
          "component": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Component",
            "description": "Component name (for Dapr components)"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "ComponentHealth",
        "description": "Individual component health status."
      },
      "HealthCheckResponse": {
        "properties": {
          "status": {
            "$ref": "#/components/schemas/HealthStatus",
            "description": "Overall health status"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Health check timestamp"
          },
          "service": {
            "type": "string",
            "title": "Service",
            "description": "Service name"
          },
          "version": {
            "type": "string",
            "title": "Version",
            "description": "Service version"
          },
          "checks": {
            "additionalProperties": {
              "$ref": "#/components/schemas/ComponentHealth"
            },
            "type": "object",
            "title": "Checks",
            "description": "Individual component health checks"
          }
        },
        "type": "object",
        "required": [
          "status",
          "service",
          "version"
        ],
        "title": "HealthCheckResponse",
        "description": "Health check response model."
      },
      "HealthStatus": {
        "type": "string",
        "enum": [
          "healthy",
          "unhealthy"
        ],
        "title": "HealthStatus",
        "description": "Health status enumeration."
      },
      "LoginResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "token_type"
        ],
        "title": "LoginResponse",
        "description": "Response model for successful login attempts.\n\nContains the JWT access token and token type, extending the base\nlogin response model. Used in the token endpoint response."
      },
      "Metadata": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "sort": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sort"
          },
          "filter": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filter"
          }
        },
        "type": "object",
        "required": [
          "total",
          "page",
          "limit",
          "sort",
          "filter"
        ],
        "title": "Metadata",
        "description": "Metadata Model\n\nRepresents metadata for paginated API responses.\nIncludes total count, current page, items per page, sort criteria,\nand filter conditions."
      },
      "UserAccount": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          },
          "tenantId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tenantid"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "UserAccount",
        "description": "User account model for API requests.\n\nExtends the BaseUserAccount to maintain separation between API versions\nwhile inheriting all base functionality. This allows for version-specific\nextensions to the model if needed in the future."
      },
      "UserAccountInDB": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          },
          "tenantId": {
            "type": "string",
            "title": "Tenantid"
          },
          "hashedPassword": {
            "type": "string",
            "title": "Hashedpassword"
          },
          "isSuperuser": {
            "type": "boolean",
            "title": "Issuperuser",
            "default": false
          },
          "isActive": {
            "type": "boolean",
            "title": "Isactive",
            "default": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "title": "Createdat"
          },
          "updatedAt": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updatedat"
          },
          "lastLogin": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lastlogin"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password",
          "tenantId",
          "hashedPassword",
          "createdAt"
        ],
        "title": "UserAccountInDB",
        "description": "User account model for database storage.\n\nExtends the BaseUserAccountInDB to maintain a clean separation between\nAPI versions while inheriting all the necessary database fields.\nThis model represents the complete user account data as stored in MongoDB."
      },
      "UserError": {
        "properties": {
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          }
        },
        "type": "object",
        "title": "UserError",
        "description": "User-friendly error information model.\n\nContains structured error information that is suitable for display to end users,\nsuch as error codes and localized error messages.\n\nAttributes:\n    code: Application-specific error code\n    message: User-friendly error message suitable for display"
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "flows": {
          "password": {
            "scopes": {},
            "tokenUrl": "/api/v1/accounts/token"
          }
        }
      }
    }
  }
}
